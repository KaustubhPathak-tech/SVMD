<!DOCTYPE html>

{% extends "base.html" %}

{% block title %}Edit Profile - Mandiram{% endblock %}

{% block content %}
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        .input,
        .textarea,
        textarea,
        select {
            border: 1px solid var(--fallback-b3, #d1d5db) !important;
            padding: 10px 5px;
        }

        .editForm {
            padding: 3vh 2vw;
        }
    </style>
</head>

<body>
    <section class="flex justify-center my-8">
        <div class="editForm card w-full max-w-2xl shadow-2xl bg-base-100 border border-orange-600">

            <div class="card-body">
                <h2 class="card-title text-2xl">Edit Profile</h2>
                <div class="divider"></div>
                <button id="editToggleBtn" type="button"
                    class="btn btn-sm btn-outline btn-primary flex items-center gap-2">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24"
                        stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"
                            d="M15.232 5.232l3.536 3.536M4 20h4l10.607-10.607a1 1 0 000-1.414l-2.586-2.586a1 1 0 00-1.414 0L4 16v4z" />
                    </svg>
                    Edit
                </button>
                <form method="POST" enctype="multipart/form-data" class="space-y-4">
                    {% csrf_token %}

                    <!-- First Name -->
                    <label class="form-control w-full">
                        <span class="label-text">First Name</span>
                        <div
                            class="input input-bordered !border !border-base-300 flex items-center gap-3 focus:ring focus:ring-primary/30">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 opacity-70" fill="none"
                                viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"
                                    d="M12 6a4 4 0 110 8 4 4 0 010-8zm0 10c4.418 0 8 1.79 8 4v1H4v-1c0-2.21 3.582-4 8-4z" />
                            </svg>
                            {{ u_form.first_name }}
                        </div>
                    </label>

                    <!-- Last Name -->
                    <label class="form-control w-full">
                        <span class="label-text">Last Name</span>
                        <div
                            class="input input-bordered !border !border-base-300 flex items-center gap-3 focus:ring focus:ring-primary/30">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 opacity-70" fill="none"
                                viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"
                                    d="M12 6a4 4 0 110 8 4 4 0 010-8z" />
                            </svg>
                            {{ u_form.last_name }}
                        </div>
                    </label>

                    <!-- Email -->
                    <label class="form-control w-full">
                        <span class="label-text">Email</span>
                        <div
                            class="input input-bordered !border !border-base-300 flex items-center gap-3 focus:ring focus:ring-primary/30">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 opacity-70" fill="none"
                                viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"
                                    d="M16 12H8m8 0l-4 4m4-4l-4-4M4 6h16v12H4z" />
                            </svg>
                            {{ u_form.email }}
                        </div>
                    </label>

                    <!-- Phone -->
                    <label class="form-control w-full">
                        <span class="label-text">Phone</span>
                        <div
                            class="input input-bordered !border !border-base-300 flex items-center gap-3 focus:ring focus:ring-primary/30">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 opacity-70" fill="none"
                                viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"
                                    d="M3 5h2l2 5-2 5H3l3 5h12l3-5h-2l-2-5 2-5h2l-3-5H6L3 5z" />
                            </svg>
                            {{ p_form.phone }}
                        </div>
                    </label>
                    <span class="label-text">Bio</span>
                    <!-- Bio -->
                    <label class="form-control w-full">

                        {{ p_form.bio }}
                    </label>
                    <br />
                    <br />
                    <!-- Avatar -->
                    <label class="form-control w-full">
                        <span class="label-text">Avatar</span>
                        {{ p_form.avatar }}
                    </label>
                    <br />
                    <br />
                    <!-- Buttons -->
                    <div class="flex justify-between mt-6">
                        <a href="{% url 'core:view_profile' %}" class="btn btn-outline btn-error">
                            Cancel
                        </a>
                        &nbsp;&nbsp;&nbsp;
                        <button type="submit" class="btn btn-primary">
                            Update Profile
                        </button>
                    </div>

                </form>

            </div>
        </div>
    </section>
    <br />
    <script>
        // ðŸ”¥ Toggle Edit Mode (NEW)
        const toggleBtn = document.getElementById("editToggleBtn");
        const form = document.querySelector(".editForm form");

        // Get all editable fields
        const fields = form.querySelectorAll("input, textarea, select");

        // Initially disable everything
        fields.forEach(f => f.disabled = true);

        let isEditing = false;

        toggleBtn.addEventListener("click", () => {
            isEditing = !isEditing;

            fields.forEach(f => f.disabled = !isEditing);

            toggleBtn.innerHTML = isEditing
                ? `Update Fields now`
                : `Edit`;
        });
    </script>

</body>

</html>

{% endblock %}