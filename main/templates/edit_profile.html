<!DOCTYPE html>

{% extends "base.html" %}

{% block title %}Edit Profile - Mandiram{% endblock %}

{% block content %}
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- <style>
        .input,
        .textarea,
        textarea,
        select {
            border: 1px solid var(--fallback-b3, #d1d5db) !important;
            padding: 10px 5px;
        }

        .editForm {
            padding: 3vh 2vw;
        }
    </style> -->
    <style>
        /* ---------- Base Styling ---------- */
        .editForm {
            padding: 2rem 1.2rem;
        }

        .input,
        .textarea,
        textarea,
        select {
            border: 1px solid #d1d5db !important;
            padding: 10px 8px;
            width: 100%;
        }

        /* ---------- Card ---------- */
        .editForm.card {
            border-radius: 14px;
        }

        /* ---------- Labels ---------- */
        .form-control .label-text {
            font-size: 0.9rem;
            font-weight: 600;
        }

        /* ---------- Mobile First ---------- */
        @media (max-width: 640px) {
            .editForm {
                padding: 2.5rem 1rem;
                max-width: 90vw;
            }

            .card-body {
                padding: 1.2rem;
            }

            .card-title {
                font-size: 1.4rem;
            }

            .input,
            textarea,
            select {
                font-size: 0.9rem;
                padding: 10px;
            }

            /* Buttons layout better on small screens */
            .profile-actions {
                flex-direction: column;
                gap: 10px;
            }

            .avatar-wrapper {
                width: 100%;
                overflow: hidden;
            }

            /* Control the file input itself */
            .avatar-wrapper input[type="file"] {
                width: 100%;
                display: block;
                white-space: nowrap;
                overflow: hidden;
                text-overflow: ellipsis;
            }

            /* Optional â€“ nicer button look if needed */
            .avatar-wrapper input[type="file"]::file-selector-button {
                padding: 8px 12px;
                border-radius: 6px;
            }

        }

        /* ---------- Tablets ---------- */
        @media (min-width: 641px) and (max-width: 1024px) {
            .editForm {
                padding: 3rem 2rem;
            }

            .card-title {
                font-size: 1.6rem;
            }
        }

        /* ---------- Laptop & Desktop ---------- */
        @media (min-width: 1025px) {
            .editForm {
                padding: 3rem 3rem;
            }

            .card-body {
                padding: 2rem;
            }

            .card-title {
                font-size: 1.8rem;
            }

            .input,
            textarea,
            select {
                font-size: 1rem;
            }
        }
    </style>

</head>

<body>
    <section class="flex justify-center my-8">
        <div class="editForm card w-full max-w-2xl shadow-2xl bg-base-100 border border-orange-600">

            <div class="card-body">
                <h2 class="card-title text-2xl">Edit Profile</h2>
                <div class="divider"></div>

                <form method="POST" enctype="multipart/form-data" class="space-y-4 updateProfile">
                    {% csrf_token %}

                    <!-- First Name -->
                    <label class="form-control w-full">
                        <span class="label-text">First Name</span>
                        <div
                            class="input input-bordered !border !border-base-300 flex items-center gap-3 focus:ring focus:ring-primary/30">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 opacity-70" fill="none"
                                viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"
                                    d="M12 6a4 4 0 110 8 4 4 0 010-8zm0 10c4.418 0 8 1.79 8 4v1H4v-1c0-2.21 3.582-4 8-4z" />
                            </svg>
                            {{ u_form.first_name }}
                        </div>
                    </label>

                    <!-- Last Name -->
                    <label class="form-control w-full">
                        <span class="label-text">Last Name</span>
                        <div
                            class="input input-bordered !border !border-base-300 flex items-center gap-3 focus:ring focus:ring-primary/30">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 opacity-70" fill="none"
                                viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"
                                    d="M12 6a4 4 0 110 8 4 4 0 010-8z" />
                            </svg>
                            {{ u_form.last_name }}
                        </div>
                    </label>

                    <!-- Email -->
                    <label class="form-control w-full">
                        <span class="label-text">Email</span>
                        <div
                            class="input input-bordered !border !border-base-300 flex items-center gap-3 focus:ring focus:ring-primary/30">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 opacity-70" fill="none"
                                viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"
                                    d="M16 12H8m8 0l-4 4m4-4l-4-4M4 6h16v12H4z" />
                            </svg>
                            {{ u_form.email }}
                        </div>
                    </label>

                    <!-- Phone -->
                    <label class="form-control w-full">
                        <span class="label-text">Phone</span>
                        <div
                            class="input input-bordered !border !border-base-300 flex items-center gap-3 focus:ring focus:ring-primary/30">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 opacity-70" fill="none"
                                viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"
                                    d="M3 5h2l2 5-2 5H3l3 5h12l3-5h-2l-2-5 2-5h2l-3-5H6L3 5z" />
                            </svg>
                            {{ p_form.phone }}
                        </div>
                    </label>
                    <span class="label-text">Bio</span>
                    <!-- Bio -->
                    <label class="form-control w-full">

                        {{ p_form.bio }}
                    </label>
                    <br />
                    <br />
                    <!-- Avatar -->
                    <label class="form-control" id="avatar">
                        <span class="label-text">Avatar</span>
                        <div class="avatar-wrapper">
                            {{ p_form.avatar }}
                        </div>
                    </label>
                    <br />
                    <br />
                    <!-- Buttons -->
                    <div class="flex justify-between mt-6">
                        <a href="{% url 'core:view_profile' %}" class="btn btn-outline btn-error">
                            Cancel
                        </a>
                        &nbsp;&nbsp;&nbsp;
                        <button id="updateBtn" type="submit" class="btn btn-primary">
                            <span id="updateText">Update Profile</span>
                            <span id="updateLoader" class="loading loading-spinner loading-sm hidden"></span>
                        </button>
                    </div>

                </form>

            </div>
        </div>
    </section>
    <br />

    <script>
        const updateForm = document.querySelector(".updateProfile");
        const updateBtn = document.getElementById("updateBtn");
        const updateText = document.getElementById("updateText");
        const updateLoader = document.getElementById("updateLoader");

        updateForm.addEventListener("submit", () => {
            updateBtn.disabled = true;
            updateText.textContent = "Updating...";
            updateLoader.classList.remove("hidden");
        });
    </script>

</body>

</html>

{% endblock %}